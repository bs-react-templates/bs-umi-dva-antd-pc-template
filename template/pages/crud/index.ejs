import React, { Component } from 'react';
import { ScTable,ScSearchBar } from 'sc-dva-antd-pro'
import { Button,Modal,message } from 'antd'
import  {ListPageTpl} from 'pagetpl'
import Toolbar from 'components/Toolbar';
import router from 'umi/router';
import {pageConfig} from './components/pageConfig'
import {generatorSearchInfo,generatorTaleInfo} from 'utils/pageUtils'
import {model,list} from 'annotation'




const Operation=ScTable.Operation;

@model()
@list()
export default class <%=data['className'] %> extends Component {
    render(){
        <% if(data.isQuery) {%>
        const queryInfo=generatorSearchInfo(pageConfig);
        <% }%>
        const columns=generatorTaleInfo(pageConfig);
        const {modalState}=this.state
        const {dispatch,modelData}=this.props;
        let {params}=modelData;
        let _that=this;
        let tableColumns=[...columns, {
            title: '操作',
            fixed: 'right',
            width:250,
            render: (text, record, index) => {
            },
        }]
        const toolbar= (<Toolbar>
            <Button icon="plus" type="primary"  onClick={
                function goToListPage() {
                    router.push('');
                }
            }>
            新建
            </Button>
        </Toolbar>)
        return(
        <ListPageTpl toolbar={toolbar}>
            <% if(data.isQuery) {%>
            <ScSearchBar type={'<%=data['namespace'] %>/search'} {...queryInfo} />
            <% }%>
            <ScTable modelKey={'data'} type={'<%=data['namespace'] %>/queryPage'} params={params}  autoload={true} columns={tableColumns}></ScTable>
        </ListPageTpl>
        )
    }
}
